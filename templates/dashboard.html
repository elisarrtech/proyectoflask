
{% extends "base.html" %}

{% block content %}

{% if session.pop('welcome', None) %}
  <div class="alert alert-info d-flex align-items-center" role="alert">
    <i class="bi bi-person-check me-2"></i>
    ¡Bienvenido, administrador! Aquí puedes gestionar tus chatbots.
  </div>
{% endif %}

<h2 class="mb-4">Lista de Chatbots</h2>

<a href="{{ url_for('nuevo') }}" class="btn btn-success mb-3">
  <i class="bi bi-plus-circle"></i> Crear nuevo chatbot
</a>

<table class="table table-bordered table-hover">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Activo</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for bot in chatbots %}
    <tr>
      <td>{{ bot.id }}</td>
      <td>{{ bot.nombre }}</td>
      <td>{{ bot.descripcion }}</td>
      <td>
        {% if bot.activo %}
          <span class="badge bg-success">Sí</span>
        {% else %}
          <span class="badge bg-secondary">No</span>
        {% endif %}
      </td>
      <td>
        <a href="{{ url_for('editar', bot_id=bot.id) }}" class="btn btn-sm btn-warning"><i class="bi bi-pencil"></i></a>
        <form action="{{ url_for('borrar') }}" method="POST" class="d-inline">
          <input type="hidden" name="bot_id" value="{{ bot.id }}">
          <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('¿Estás seguro de eliminar este bot?')">
            <i class="bi bi-trash"></i>
          </button>
        </form>
        <a href="{{ url_for('faqs', bot_id=bot.id) }}" class="btn btn-sm btn-info text-white"><i class="bi bi-question-circle"></i> FAQs</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
